[gd_scene load_steps=29 format=3 uid="uid://d2j2q3cwvwesw"]

[ext_resource type="PackedScene" uid="uid://dptqv0l043tyw" path="res://levels/base_level.tscn" id="1_ty3hu"]
[ext_resource type="Texture2D" uid="uid://bdsbune6m5ul1" path="res://levels/level_01_mockup.png" id="2_mckh2"]
[ext_resource type="PackedScene" uid="uid://b3lmri50c7jn1" path="res://core/cookie_stash/cookie_stash.tscn" id="3_81a5f"]
[ext_resource type="PackedScene" uid="uid://cdppfmbhnfc3d" path="res://core/security_camera/security_camera.tscn" id="4_gg43x"]
[ext_resource type="Script" uid="uid://cw0363ko8eoy5" path="res://core/security_camera/camera_position.gd" id="5_mllcm"]
[ext_resource type="PackedScene" uid="uid://cqscxj4caxy1i" path="res://core/detection_beam/detection_beam.tscn" id="6_q7ibo"]
[ext_resource type="PackedScene" uid="uid://d3ex6enbtttl5" path="res://core/door/door.tscn" id="7_cg8v6"]
[ext_resource type="PackedScene" uid="uid://be3ewbyga6008" path="res://core/lever_button/lever_button.tscn" id="8_j0sdw"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_mckh2"]
size = Vector2(32, 522)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_81a5f"]
size = Vector2(32, 184)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_j0sdw"]
size = Vector2(32, 200)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_gg43x"]
size = Vector2(25, 306)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_mllcm"]
size = Vector2(626.25, 29)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_q7ibo"]
size = Vector2(393.125, 26)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_cg8v6"]
size = Vector2(916.563, 32)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_jy02f"]
size = Vector2(164.5, 32)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_q7ibo"]
cull_mode = 2
polygon = PackedVector2Array(440, 592, 1080, 592, 1080, 792, 1048, 792, 1048, 624, 728, 624, 728, 912, 328, 912, 328, 872, 696, 872, 696, 624, 440, 624)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_cg8v6"]
cull_mode = 2
polygon = PackedVector2Array(304, 592, 304, 624, 168, 624, 168, 1088, 1048, 1088, 1048, 936, 1080, 936, 1080, 1120, 136, 1120, 136, 592)

[sub_resource type="Animation" id="Animation_cg8v6"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(592, 621)]
}

[sub_resource type="Animation" id="Animation_q7ibo"]
resource_name = "loop_detection_beam"
length = 13.0
loop_mode = 1
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 2, 5, 7, 10, 13),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 0,
"values": [Vector2(592, 621), Vector2(592, 621), Vector2(169, 621), Vector2(169, 621), Vector2(592, 621), Vector2(592, 621)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_j0sdw"]
_data = {
&"RESET": SubResource("Animation_cg8v6"),
&"loop_detection_beam": SubResource("Animation_q7ibo")
}

[sub_resource type="Resource" id="Resource_mllcm"]
script = ExtResource("5_mllcm")
rotation = 0.567232
duration_min_sec = 3.0
duration_max_sec = 3.0
metadata/_custom_type_script = "uid://cw0363ko8eoy5"

[sub_resource type="Resource" id="Resource_q7ibo"]
script = ExtResource("5_mllcm")
rotation = 2.57436
duration_min_sec = 1.0
duration_max_sec = 3.0
metadata/_custom_type_script = "uid://cw0363ko8eoy5"

[sub_resource type="Resource" id="Resource_j0sdw"]
script = ExtResource("5_mllcm")
rotation = 3.14159
duration_min_sec = 1.0
duration_max_sec = 3.0
metadata/_custom_type_script = "uid://cw0363ko8eoy5"

[sub_resource type="Resource" id="Resource_jy02f"]
script = ExtResource("5_mllcm")
rotation = 2.26893
duration_min_sec = 1.0
duration_max_sec = 4.0
metadata/_custom_type_script = "uid://cw0363ko8eoy5"

[sub_resource type="Resource" id="Resource_5dxk1"]
script = ExtResource("5_mllcm")
rotation = 3.14159
duration_min_sec = 2.0
duration_max_sec = 3.0
metadata/_custom_type_script = "uid://cw0363ko8eoy5"

[sub_resource type="Gradient" id="Gradient_satuh"]
offsets = PackedFloat32Array(0.864943, 1)
colors = PackedColorArray(1, 1, 1, 1, 0, 0, 0, 0)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_cg8v6"]
gradient = SubResource("Gradient_satuh")
width = 1080
height = 1080
fill = 1
fill_from = Vector2(0.5, 0.5)
fill_to = Vector2(0.850427, 0.211538)

[node name="Level_01" instance=ExtResource("1_ty3hu")]

[node name="LevelMockup" type="Sprite2D" parent="." index="0"]
self_modulate = Color(1, 1, 1, 0.321569)
position = Vector2(624, 888)
texture = ExtResource("2_mckh2")
metadata/_edit_lock_ = true

[node name="LevelTimer" parent="." index="2"]
wait_time = 90.0

[node name="HouseWalls" type="StaticBody2D" parent="." index="3"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="HouseWalls" index="0"]
position = Vector2(152, 859)
shape = SubResource("RectangleShape2D_mckh2")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="HouseWalls" index="1"]
position = Vector2(1064, 1028)
shape = SubResource("RectangleShape2D_81a5f")

[node name="CollisionShape2D7" type="CollisionShape2D" parent="HouseWalls" index="2"]
position = Vector2(1064, 692)
shape = SubResource("RectangleShape2D_j0sdw")

[node name="CollisionShape2D3" type="CollisionShape2D" parent="HouseWalls" index="3"]
position = Vector2(712, 751)
shape = SubResource("RectangleShape2D_gg43x")

[node name="CollisionShape2D4" type="CollisionShape2D" parent="HouseWalls" index="4"]
position = Vector2(750.875, 606.5)
shape = SubResource("RectangleShape2D_mllcm")

[node name="CollisionShape2D5" type="CollisionShape2D" parent="HouseWalls" index="5"]
position = Vector2(528.563, 896)
shape = SubResource("RectangleShape2D_q7ibo")

[node name="CollisionShape2D6" type="CollisionShape2D" parent="HouseWalls" index="6"]
position = Vector2(605.719, 1104)
shape = SubResource("RectangleShape2D_cg8v6")

[node name="CollisionShape2D8" type="CollisionShape2D" parent="HouseWalls" index="7"]
position = Vector2(221.75, 608)
shape = SubResource("RectangleShape2D_jy02f")

[node name="LightOccluder2D" type="LightOccluder2D" parent="HouseWalls" index="8"]
modulate = Color(1, 1, 1, 0)
occluder = SubResource("OccluderPolygon2D_q7ibo")

[node name="LightOccluder2D2" type="LightOccluder2D" parent="HouseWalls" index="9"]
modulate = Color(1, 1, 1, 0)
occluder = SubResource("OccluderPolygon2D_cg8v6")

[node name="CookieStash1" parent="." index="4" instance=ExtResource("3_81a5f")]
position = Vector2(968, 698)

[node name="CookieStash2" parent="." index="5" instance=ExtResource("3_81a5f")]
position = Vector2(642, 666)

[node name="DetectionBeam1" parent="." index="6" instance=ExtResource("6_q7ibo")]
position = Vector2(728, 768)
beam_length = 316.0

[node name="DetectionBeam2" parent="." index="7" node_paths=PackedStringArray("controlling_lever") instance=ExtResource("6_q7ibo")]
position = Vector2(592, 621)
rotation = 1.5708
controlling_lever = NodePath("../BeamLeverButton3")
beam_length = 262.0
blink_pattern = PackedFloat32Array(5, 2, 3, 3)

[node name="AnimationPlayer" type="AnimationPlayer" parent="DetectionBeam2" index="5"]
callback_mode_process = 0
libraries = {
&"": SubResource("AnimationLibrary_j0sdw")
}
autoplay = "loop_detection_beam"

[node name="SecurityCamera" parent="." index="8" instance=ExtResource("4_gg43x")]
position = Vector2(538.053, 903.929)
radius = 313.0
fov = 1.13446
left_limit = 0.0
right_limit = 3.14159
camera_positions = Array[ExtResource("5_mllcm")]([SubResource("Resource_mllcm"), SubResource("Resource_q7ibo")])

[node name="OutdoorSecurityCamera" parent="." index="9" node_paths=PackedStringArray("controlling_lever") instance=ExtResource("4_gg43x")]
position = Vector2(1080, 360)
controlling_lever = NodePath("../CameraLeverButton")
fov = 1.39626
left_limit = 0.0
right_limit = 6.28319
rotaton_speed = 4.0
camera_position_index = 3
camera_positions = Array[ExtResource("5_mllcm")]([SubResource("Resource_j0sdw"), SubResource("Resource_jy02f"), SubResource("Resource_5dxk1"), SubResource("Resource_jy02f")])

[node name="FrontDoor" parent="." index="10" node_paths=PackedStringArray("controlling_lever") instance=ExtResource("7_cg8v6")]
position = Vector2(376, 608)
rotation = 3.14159
controlling_lever = NodePath("../DoorLeverButton2")

[node name="SideDoor" parent="." index="11" instance=ExtResource("7_cg8v6")]
position = Vector2(1064, 864)
rotation = -1.5708

[node name="CameraLeverButton" parent="." index="12" instance=ExtResource("8_j0sdw")]
position = Vector2(1016, 592)

[node name="DoorLeverButton2" parent="." index="13" instance=ExtResource("8_j0sdw")]
position = Vector2(504, 592)
flipped_over = false

[node name="BeamLeverButton3" parent="." index="14" instance=ExtResource("8_j0sdw")]
position = Vector2(648, 880)

[node name="ExitArea" parent="." index="15"]
position = Vector2(520, 232)

[node name="CollisionShape2D" parent="ExitArea" index="0"]
position = Vector2(55.5, -12.5)

[node name="Label" parent="ExitArea" index="1"]
offset_left = -16.0
offset_top = -80.0
offset_right = 122.0
offset_bottom = -35.0

[node name="Player" parent="." index="16"]
position = Vector2(576, 256)
metadata/_edit_lock_ = true

[node name="VisionPointLight2D" parent="Player" index="5"]
texture = SubResource("GradientTexture2D_cg8v6")
metadata/_edit_lock_ = true
